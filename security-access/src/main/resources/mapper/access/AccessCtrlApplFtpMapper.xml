<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.access.mapper.AccessCtrlApplFtpMapper">

    <resultMap type="AccessPolicyApplFtp" id="AccessCtrlApplFtpResult">
        <id property="id" column="id"/>
        <result property="serverName" column="server_name"/>
        <result property="sourceIp" column="source_ip"/>
        <result property="sourcePort" column="source_port"/>
        <result property="targetIp" column="target_ip"/>
        <result property="targetPort" column="target_port"/>
        <result property="directory" column="directory"/>
        <result property="status" column="status"/>
        <result property="createBy" column="create_by"/>
        <result property="createTime" column="create_time"/>
        <result property="updateBy" column="update_by"/>
        <result property="updateTime" column="update_time"/>
        <result property="remark" column="remark"/>
    </resultMap>

    <sql id="selectAccessCtrlVo">
        select id,
               server_name,
               directory,
               source_ip,
               source_port,
               target_ip,
               target_port,
               status,
               create_by,
               create_time,
               update_by,
               update_time,
               remark
        from access_ctrl_appl_ftp
    </sql>

    <select id="selectAccessCtrlApplFtpList" parameterType="AccessPolicyApplFtp"
            resultMap="AccessCtrlApplFtpResult">
        <include refid="selectAccessCtrlVo"/>
        where 1=1
        <if test="serverName != null and serverName != ''">
            AND server_name = #{serverName}
        </if>
        <if test="sourceIp != null">
            AND source_ip = #{sourceIp}
        </if>
        <if test="sourcePort != null">
            AND source_port = #{sourcePort}
        </if>
        <if test="targetIp != null">
            AND target_ip = #{targetIp}
        </if>
        <if test="targetPort != null">
            AND target_port = #{targetPort}
        </if>
        <if test="directory != null and directory != ''">
            AND directory = #{directory}
        </if>
        <if test="status != null and status != ''">
            AND status = #{status}
        </if>
        order by create_time DESC
    </select>

    <select id="selectAccessCtrlApplFtpById" parameterType="Long" resultMap="AccessCtrlApplFtpResult">
        <include refid="selectAccessCtrlVo"/>
        where id = #{id}
    </select>

    <select id="checkUnique" parameterType="String" resultMap="AccessCtrlApplFtpResult">
        <include refid="selectAccessCtrlVo"/>
        where server_name = #{serverName} AND directory = #{directory}
    </select>

    <select id="selectAccessCtrlApplFtpListByStatus" parameterType="String" resultMap="AccessCtrlApplFtpResult">
        <include refid="selectAccessCtrlVo"/>
        where status = #{status}
    </select>

    <insert id="insertAccessCtrlApplFtp" parameterType="AccessPolicyApplFtp">
        insert into access_ctrl_appl_ftp (server_name,
                                          source_ip,
                                          source_port,
                                          target_ip,
                                          target_port,
                                          directory, status, create_by, create_time, update_by, update_time, remark)
        values (#{serverName},
                #{sourceIp},
                #{sourcePort},
                #{targetIp},
                #{targetPort},
                #{directory}, #{status}, #{createBy}, #{createTime}, #{updateBy}, #{updateTime}, #{remark})
    </insert>

    <update id="updateAccessCtrlApplFtp" parameterType="AccessPolicyApplFtp">
        update access_ctrl_appl_ftp
        <set>
            <if test="serverName != null">server_name = #{serverName},</if>
            <if test="sourceIp != null">source_ip = #{sourceIp},</if>
            <if test="sourcePort != null">source_port = #{sourcePort},</if>
            <if test="targetIp != null">target_ip = #{targetIp},</if>
            <if test="targetPort != null">target_port = #{targetPort},</if>
            <if test="directory != null">directory = #{directory},</if>
            <if test="status != null">status = #{status},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="remark != null">remark = #{remark},</if>
        </set>
        where id = #{id}
    </update>

    <delete id="deleteAccessCtrlApplFtpByIds">
        delete from access_ctrl_appl_ftp where id in
        <foreach collection="array" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>